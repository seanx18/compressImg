<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>智能图片压缩工具</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🖼️</text></svg>"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <!-- 头部 -->
      <header class="header">
        <div class="container">
          <h1 class="title">
            🖼️ 智能图片压缩工具
            <span class="subtitle">基于IPX，支持动画图片</span>
          </h1>
        </div>
      </header>

      <!-- 主要内容 -->
      <main class="main">
        <div class="container">
          <!-- 主要工作区域 - 左右分栏布局 -->
          <div class="main-workspace">
            <!-- 左侧：上传和设置区域 -->
            <div class="left-panel">
              <!-- 上传区域 -->
              <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                  <div class="upload-content">
                    <div class="upload-icon">📁</div>
                    <h3>拖拽图片到此处或点击选择</h3>
                    <p>支持 JPG、PNG、WebP、GIF 格式</p>
                    <p class="upload-hint">支持批量上传，自动检测动画图片</p>
                  </div>
                  <input type="file" id="fileInput" multiple accept="image/*" hidden />
                </div>
              </section>

              <!-- 操作按钮区域 -->
              <section class="actions-section">
                <div class="button-group">
                  <button id="settingsBtn" class="btn btn-secondary">⚙️ 设置</button>
                  <button id="compressBtn" class="btn btn-primary" disabled>🚀 开始压缩</button>
                  <button id="clearBtn" class="btn btn-secondary">🗑️ 清空列表</button>
                  <button id="downloadAllBtn" class="btn btn-success" disabled>📦 下载全部</button>
                </div>
              </section>
            </div>

            <!-- 右侧：文件列表区域 -->
            <div class="right-panel">
              <section class="files-section">
            <div class="files-header">
              <h3>📋 文件列表</h3>
              <div class="files-stats">
                <span id="filesCount">0 个文件</span>
                <span id="totalSize">总大小: 0 MB</span>
              </div>
            </div>
                <div class="files-list" id="filesList">
                  <div class="empty-state">
                    <div class="empty-icon">📷</div>
                    <p>暂无文件，请上传图片开始压缩</p>
                  </div>
                </div>
              </section>

              <!-- 统计区域 -->
              <section class="stats-section" id="statsSection" style="display: none">
                <div class="stats-summary">
                  <h4>📊 压缩统计</h4>
                  <p class="stats-text">
                    压缩率 <span id="totalCompressionRatio">0%</span> | 
                    节省 <span id="spaceSaved">0 MB</span> | 
                    耗时 <span id="processingTime">0s</span> | 
                    成功 <span id="successCount">0</span> 个文件
                  </p>
                </div>
              </section>
            </div>
          </div>
        </div>
      </main>

      <!-- 底部 -->
      <footer class="footer">
        <div class="container">
          <p>&copy; 2025 智能压缩工具 Team. 基于 IPX + Sharp 技术栈</p>
          <p>
            <a href="https://github.com/seanx18/compressImg" target="_blank"> 📂 GitHub 项目 </a>
          </p>
        </div>
      </footer>
    </div>

    <!-- 悬浮设置面板 -->
    <div class="settings-overlay" id="settingsOverlay" style="display: none">
      <div class="settings-panel">
        <div class="settings-header">
          <h3>⚙️ 压缩设置</h3>
          <button class="close-btn" id="closeSettingsBtn">✕</button>
        </div>
        <div class="settings-content">
          <div class="settings-grid">
            <!-- 基础设置 -->
            <div class="setting-group">
              <h4>📏 尺寸设置</h4>
              <div class="setting-row">
                <label>
                  宽度 (px):
                  <input type="number" id="widthInput" placeholder="原图宽度" min="1" max="4096" />
                </label>
                <label>
                  高度 (px):
                  <input type="number" id="heightInput" placeholder="原图高度" min="1" max="4096" />
                </label>
              </div>
              <div class="setting-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="keepRatio" checked />
                  <span class="checkmark"></span>
                  保持宽高比
                </label>
              </div>
            </div>

            <!-- 质量设置 -->
            <div class="setting-group">
              <h4>🎯 压缩设置</h4>
              <div class="setting-row">
                <label>
                  图片质量: <span id="qualityValue">85</span>%
                  <input type="range" id="qualitySlider" min="10" max="100" value="85" />
                </label>
              </div>
              <div class="setting-row">
                <label>
                  输出格式:
                  <select id="formatSelect">
                    <option value="webp">WebP (推荐)</option>
                    <option value="jpg">JPEG</option>
                    <option value="png">PNG</option>
                    <option value="auto">自动选择</option>
                  </select>
                </label>
              </div>
            </div>

            <!-- 动画设置 -->
            <div class="setting-group">
              <h4>🎬 动画设置</h4>
              <div class="setting-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="preserveAnimation" checked />
                  <span class="checkmark"></span>
                  保持动画效果
                </label>
              </div>
              <div class="setting-row">
                <label class="checkbox-label">
                  <input type="checkbox" id="keepOriginalName" checked />
                  <span class="checkmark"></span>
                  保持原始文件名
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 加载提示 -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <h3>正在处理图片...</h3>
        <p id="loadingText">请稍候</p>
        <div class="loading-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <span id="progressText">0%</span>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
